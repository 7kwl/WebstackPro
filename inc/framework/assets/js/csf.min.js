/* Codestar Framework | A Simple and Lightweight WordPress Option Framework - v2.1.3.x*/

!function(a,b,c,d){"use strict";var e=e||{};e.funcs={},e.vars={onloaded:!1,$body:a("body"),$window:a(b),$document:a(c),$form_warning:null,form_modified:!1,code_themes:[],is_rtl:a("body").hasClass("rtl")},e.helper={uid:function(a){return(a||"")+Math.random().toString(36).substr(2,9)},preg_quote:function(a){return(a+"").replace(/(\[|\-|\])/g,"\\$1")},name_nested_replace:function(b,c){var f=new RegExp("("+e.helper.preg_quote(c)+")\\[(\\d+)\\]","g");b.find(":radio").each(function(){(this.checked||this.orginal_checked)&&(this.orginal_checked=!0)}),b.each(function(b){a(this).find(":input").each(function(){this.name=this.name.replace(f,c+"["+b+"]"),this.orginal_checked&&(this.checked=!0)})})},debounce:function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},get_cookie:function(a){var b,d,e=c.cookie,f=a+"=";if(e){if(d=e.indexOf("; "+f),-1===d){if(d=e.indexOf(f),0!==d)return null}else d+=2;return b=e.indexOf(";",d),-1===b&&(b=e.length),decodeURIComponent(e.substring(d+f.length,b))}},set_cookie:function(a,b,d,e,f,g){var h=new Date;"object"==typeof d&&d.toGMTString?d=d.toGMTString():parseInt(d,10)?(h.setTime(h.getTime()+1e3*parseInt(d,10)),d=h.toGMTString()):d="",c.cookie=a+"="+encodeURIComponent(b)+(d?"; expires="+d:"")+(e?"; path="+e:"")+(f?"; domain="+f:"")+(g?"; secure":"")},remove_cookie:function(a,b,c,d){e.helper.set_cookie(a,"",-1e3,b,c,d)}},a.fn.csf_clone=function(){var e,f,b=a.fn.clone.apply(this,arguments),c=this.find("select").add(this.filter("select")),d=b.find("select").add(b.filter("select"));for(e=0;e<c.length;++e)for(f=0;f<c[e].options.length;++f)c[e].options[f].selected===!0&&(d[e].options[f].selected=!0);return this.find(":radio").each(function(){this.orginal_checked=this.checked}),b},a.fn.csf_expand_all=function(){return this.each(function(){a(this).on("click",function(b){b.preventDefault(),a(".csf-wrapper").toggleClass("csf-show-all"),a(".csf-section").csf_reload_script(),a(this).find(".fa").toggleClass("fa-indent").toggleClass("fa-outdent")})})},a.fn.csf_nav_options=function(){return this.each(function(){var g,c=a(this),e=c.find("a"),f=c.closest(".csf").find(".csf-section-id");a(b).on("hashchange",function(){var j,c=b.location.hash.match(new RegExp("tab=([^&]*)")),h=c?c[1]:e.first().attr("href").replace("#tab=",""),i=a("#csf-tab-link-"+h);i.length>0&&(i.closest(".csf-tab-depth-0").addClass("csf-tab-active").siblings().removeClass("csf-tab-active"),e.removeClass("csf-section-active"),i.addClass("csf-section-active"),g!==d&&g.hide(),j=a("#csf-section-"+h),j.css({display:"block"}),j.csf_reload_script(),f.val(h),g=j)}).trigger("hashchange")})},a.fn.csf_nav_metabox=function(){return this.each(function(){var h,i,j,b=a(this),c=b.find("a"),f=b.data("unique"),g=a("#post_ID").val()||"global";c.on("click",function(b){var c,j,k;b.preventDefault(),c=a(this),j=c.data("section"),i!==d&&i.removeClass("csf-section-active"),h!==d&&h.hide(),c.addClass("csf-section-active"),k=a("#csf-section-"+j),k.css({display:"block"}),k.csf_reload_script(),e.helper.set_cookie("csf-last-metabox-tab-"+g+"-"+f,j),h=k,i=c}),j=e.helper.get_cookie("csf-last-metabox-tab-"+g+"-"+f),j?b.find('a[data-section="'+j+'"]').trigger("click"):c.first("a").trigger("click")})},a.fn.csf_page_templates=function(){this.length&&a(c).on("change",".editor-page-attributes__template select, #page_template",function(){var b=a(this).val()||"default";a(".csf-page-templates").removeClass("csf-show").addClass("csf-hide"),a(".csf-page-"+b.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-")).removeClass("csf-hide").addClass("csf-show")})},a.fn.csf_post_formats=function(){this.length&&a(c).on("change",'.editor-post-format select, #formatdiv input[name="post_format"]',function(){var b=a(this).val()||"default";b="0"===b?"default":b,a(".csf-post-formats").removeClass("csf-show").addClass("csf-hide"),a(".csf-post-format-"+b).removeClass("csf-hide").addClass("csf-show")})},a.fn.csf_search=function(){return this.each(function(){var b=a(this),c=b.find("input");c.on("change keyup",function(){var b=a(this).val(),c=a(".csf-wrapper"),d=c.find(".csf-section"),e=d.find("> .csf-field:not(.hidden)"),f=e.find("> .csf-title, .csf-search-tags");b.length>3?(e.addClass("csf-hidden"),c.addClass("csf-search-all"),f.each(function(){var d,c=a(this);c.text().match(new RegExp(".*?"+b+".*?","i"))&&(d=c.closest(".csf-field"),d.removeClass("csf-hidden"),d.parent().csf_reload_script())})):(e.removeClass("csf-hidden"),c.removeClass("csf-search-all"))})})},a.fn.csf_sticky=function(){return this.each(function(){var d=a(this),e=a(b),f=d.find(".csf-header-inner"),g=parseInt(f.css("padding-left"))+parseInt(f.css("padding-right")),h=32,i=0,k=!1,l=function(){var a=d.offset().top,e=Math.max(h,a-i),j=Math.max(c.documentElement.clientWidth,b.innerWidth||0);h>=e&&j>782?(f.css({width:d.outerWidth()-g}),d.css({height:d.outerHeight()}).addClass("csf-sticky")):(f.removeAttr("style"),d.removeAttr("style").removeClass("csf-sticky"))},m=function(){k||requestAnimationFrame(function(){l(),k=!1}),k=!0},n=function(){i=e.scrollTop(),m()};e.on("scroll resize",n),n()})},a.fn.csf_dependency=function(){return this.each(function(){var b=a(this),c=a.csf_deps.createRuleset(),d=[],f=!1;b.children("[data-controller]").each(function(){var b=a(this),e=b.data("controller").split("|"),g=b.data("condition").split("|"),h=b.data("value").toString().split("|"),i=c;b.data("depend-global")&&(f=!0),a.each(e,function(a,c){var e=h[a]||"",f=g[a]||g[0];i=i.createRule('[data-depend-id="'+c+'"]',f,e),i.include(b),d.push(c)})}),d.length&&(f?a.csf_deps.enable(e.vars.$body,c,d):a.csf_deps.enable(b,c,d))})},a.fn.csf_field_accordion=function(){return this.each(function(){var b=a(this).find(".csf-accordion-title");b.on("click",function(){var b=a(this),c=b.find(".csf-accordion-icon"),d=b.next();c.hasClass("fa-angle-right")?c.removeClass("fa-angle-right").addClass("fa-angle-down"):c.removeClass("fa-angle-down").addClass("fa-angle-right"),d.data("opened")||(d.csf_reload_script(),d.data("opened",!0)),d.toggleClass("csf-accordion-open")})})},a.fn.csf_field_backup=function(){return this.each(function(){if(b.wp.customize!==d){var c=this,f=a(this),h=(a("body"),f.find(".csf-import")),i=f.find(".csf-reset");c.notification=function(a){wp.customize.notifications&&wp.customize.OverlayNotification&&(wp.customize.state("saved").get()||(wp.customize.state("changesetStatus").set("trash"),wp.customize.each(function(a){a._dirty=!1}),wp.customize.state("saved").set(!0)),wp.customize.notifications.add(new wp.customize.OverlayNotification("csf_field_backup_notification",{type:"info",message:a,loading:!0})))},i.on("click",function(a){a.preventDefault(),e.vars.is_confirm&&(c.notification(b.csf_vars.i18n.reset_notification),b.wp.ajax.post("csf-reset",{unique:i.data("unique"),nonce:i.data("nonce")}).done(function(){b.location.reload(!0)}).fail(function(a){alert(a.error),wp.customize.notifications.remove("csf_field_backup_notification")}))}),h.on("click",function(a){a.preventDefault(),e.vars.is_confirm&&(c.notification(b.csf_vars.i18n.import_notification),b.wp.ajax.post("csf-import",{unique:h.data("unique"),nonce:h.data("nonce"),import_data:f.find(".csf-import-data").val()}).done(function(){b.location.reload(!0)}).fail(function(a){alert(a.error),wp.customize.notifications.remove("csf_field_backup_notification")}))})}})},a.fn.csf_field_background=function(){return this.each(function(){a(this).find(".csf--background-image").csf_reload_script()})},a.fn.csf_field_code_editor=function(){return this.each(function(){var b,c,d,f,g;"function"==typeof CodeMirror&&(b=a(this),c=b.find("textarea"),d=b.find(".CodeMirror"),f=c.data("editor"),d.length&&d.remove(),g=setInterval(function(){var d,h;b.is(":visible")&&(d=CodeMirror.fromTextArea(c[0],f),"default"!==f.theme&&-1===e.vars.code_themes.indexOf(f.theme)&&(h=a("<link>"),a("#csf-codemirror-css").after(h),h.attr({rel:"stylesheet",id:"csf-codemirror-"+f.theme+"-css",href:f.cdnURL+"/theme/"+f.theme+".min.css",type:"text/css",media:"all"}),e.vars.code_themes.push(f.theme)),CodeMirror.modeURL=f.cdnURL+"/mode/%N/%N.min.js",CodeMirror.autoLoadMode(d,f.mode),d.on("change",function(){c.val(d.getValue()).trigger("change")}),clearInterval(g))}))})},a.fn.csf_field_date=function(){return this.each(function(){var b=a(this),c=b.find("input"),d=b.find(".csf-date-settings").data("settings"),g={showAnim:"",beforeShow:function(b,c){a(c.dpDiv).addClass("csf-datepicker-wrapper")},onClose:function(b,c){a(c.dpDiv).removeClass("csf-datepicker-wrapper")}};d=a.extend({},d,g),2===c.length&&(d=a.extend({},d,{onSelect:function(b){var g=(a(this),c.first(),c.first().attr("id")===a(this).attr("id")?"minDate":"maxDate"),h=a.datepicker.parseDate(d.dateFormat,b);c.not(this).datepicker("option",g,h)}})),c.each(function(){var b=a(this);b.hasClass("hasDatepicker")&&b.removeAttr("id").removeClass("hasDatepicker"),b.datepicker(d)})})},a.fn.csf_field_fieldset=function(){return this.each(function(){a(this).find(".csf-fieldset-content").csf_reload_script()})},a.fn.csf_field_gallery=function(){return this.each(function(){var i,c=a(this),d=c.find(".csf-edit-gallery"),e=c.find(".csf-clear-gallery"),f=c.find("ul"),g=c.find("input");c.find("img"),c.on("click",".csf-button, .csf-edit-gallery",function(c){var h=a(this),j=g.val(),k=h.hasClass("csf-edit-gallery")?"edit":"add",l="add"!==k||j.length?"gallery-edit":"gallery";c.preventDefault(),"undefined"!=typeof b.wp&&b.wp.media&&b.wp.media.gallery&&("gallery"===l?(i=b.wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0}),i.open()):(i=b.wp.media.gallery.edit('[gallery ids="'+j+'"]'),"add"===k&&i.setState("gallery-library")),i.on("update",function(a){f.empty();var b=a.models.map(function(a){var b=a.toJSON(),c=b.sizes&&b.sizes.thumbnail&&b.sizes.thumbnail.url?b.sizes.thumbnail.url:b.url;return f.append('<li><img src="'+c+'"></li>'),b.id});g.val(b.join(",")).trigger("change"),e.removeClass("hidden"),d.removeClass("hidden")}))}),e.on("click",function(a){a.preventDefault(),f.empty(),g.val("").trigger("change"),e.addClass("hidden"),d.addClass("hidden")})})},a.fn.csf_field_group=function(){return this.each(function(){var o,p,q,b=a(this),c=b.children(".csf-fieldset"),d=c.length?c:b,f=d.children(".csf-cloneable-wrapper"),g=d.children(".csf-cloneable-hidden"),h=d.children(".csf-cloneable-max"),i=d.children(".csf-cloneable-min"),j=f.data("field-id"),k=f.data("unique-id"),l=Boolean(Number(f.data("title-number"))),m=parseInt(f.data("max")),n=parseInt(f.data("min"));f.hasClass("ui-accordion")&&f.find(".ui-accordion-header-icon").remove(),o=function(b){b.find(".csf-cloneable-title-number").each(function(){a(this).html(a(this).closest(".csf-cloneable-item").index()+1+".")})},f.accordion({header:"> .csf-cloneable-item > .csf-cloneable-title",collapsible:!0,active:!1,animate:!1,heightStyle:"content",icons:{header:"csf-cloneable-header-icon fa fa-angle-right",activeHeader:"csf-cloneable-header-icon fa fa-angle-down"},activate:function(a,b){var e,f,g,c=b.newPanel,d=b.newHeader;c.length&&!c.data("opened")?(e=c.children(),f=e.first().find(":input").first(),g=d.find(".csf-cloneable-value"),f.on("keyup",function(){g.text(f.val())}),c.csf_reload_script(),c.data("opened",!0),c.data("retry",!1)):c.data("retry")&&(c.csf_reload_script_retry(),c.data("retry",!1))}}),f.sortable({axis:"y",handle:".csf-cloneable-title,.csf-cloneable-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(a,b){f.accordion({active:!1}),f.sortable("refreshPositions"),b.item.children(".csf-cloneable-content").data("retry",!0)},update:function(){e.helper.name_nested_replace(f.children(".csf-cloneable-item"),j),f.csf_customizer_refresh(),l&&o(f)}}),d.children(".csf-cloneable-add").on("click",function(b){var c,d,e;return b.preventDefault(),c=f.children(".csf-cloneable-item").length,i.hide(),m&&c+1>m?(h.show(),void 0):(d=k+j+"["+c+"]",e=g.csf_clone(!0),e.removeClass("csf-cloneable-hidden"),e.find(':input[name!="_pseudo"]').each(function(){this.name=d+this.name.replace(this.name.startsWith("_nonce")?"_nonce":k,"")}),e.find(".csf-data-wrapper").each(function(){a(this).attr("data-unique-id",d)}),f.append(e),f.accordion("refresh"),f.accordion({active:c}),f.csf_customizer_refresh(),f.csf_customizer_listen({closest:!0}),l&&o(f),void 0)}),p=function(b){var c,d,g,k,n,p,q,r;return b.preventDefault(),c=f.children(".csf-cloneable-item").length,i.hide(),m&&c+1>m?(h.show(),void 0):(d=a(this),g=d.parent().parent(),k=g.children(".csf-cloneable-helper").csf_clone(!0),n=g.children(".csf-cloneable-title").csf_clone(),p=g.children(".csf-cloneable-content").csf_clone(),q=new RegExp("("+e.helper.preg_quote(j)+")\\[(\\d+)\\]","g"),p.find(".csf-data-wrapper").each(function(){var b=a(this);b.attr("data-unique-id",b.attr("data-unique-id").replace(q,j+"["+(g.index()+1)+"]"))}),r=a('<div class="csf-cloneable-item" />'),r.append(k),r.append(n),r.append(p),f.children().eq(g.index()).after(r),e.helper.name_nested_replace(f.children(".csf-cloneable-item"),j),f.accordion("refresh"),f.csf_customizer_refresh(),f.csf_customizer_listen({closest:!0}),l&&o(f),void 0)},f.children(".csf-cloneable-item").children(".csf-cloneable-helper").on("click",".csf-cloneable-clone",p),d.children(".csf-cloneable-hidden").children(".csf-cloneable-helper").on("click",".csf-cloneable-clone",p),q=function(b){b.preventDefault();var c=f.children(".csf-cloneable-item").length;return h.hide(),i.hide(),n&&n>c-1?(i.show(),void 0):(a(this).closest(".csf-cloneable-item").remove(),e.helper.name_nested_replace(f.children(".csf-cloneable-item"),j),f.csf_customizer_refresh(),l&&o(f),void 0)},f.children(".csf-cloneable-item").children(".csf-cloneable-helper").on("click",".csf-cloneable-remove",q),d.children(".csf-cloneable-hidden").children(".csf-cloneable-helper").on("click",".csf-cloneable-remove",q)})},a.fn.csf_field_icon=function(){return this.each(function(){var c=a(this);c.on("click",".csf-icon-add",function(d){var f,g;d.preventDefault(),f=a(this),g=a("#csf-modal-icon"),g.show(),e.vars.$icon_target=c,e.vars.icon_modal_loaded||(g.find(".csf-modal-loading").show(),b.wp.ajax.post("csf-get-icons",{nonce:f.data("nonce")}).done(function(b){g.find(".csf-modal-loading").hide(),e.vars.icon_modal_loaded=!0;var c=g.find(".csf-modal-load").html(b.content);c.on("click","a",function(b){b.preventDefault();var c=a(this).data("csf-icon");e.vars.$icon_target.find("i").removeAttr("class").addClass(c),e.vars.$icon_target.find("input").val(c).trigger("change"),e.vars.$icon_target.find(".csf-icon-preview").removeClass("hidden"),e.vars.$icon_target.find(".csf-icon-remove").removeClass("hidden"),g.hide()}),g.on("change keyup",".csf-icon-search",function(){var b=a(this).val(),d=c.find("a");d.each(function(){var c=a(this);c.data("csf-icon").search(new RegExp(b,"i"))<0?c.hide():c.show()})}),g.on("click",".csf-modal-close, .csf-modal-overlay",function(){g.hide()})}).fail(function(a){g.find(".csf-modal-loading").hide(),g.find(".csf-modal-load").html(a.error),g.on("click",function(){g.hide()})}))}),c.on("click",".csf-icon-remove",function(b){b.preventDefault(),c.find(".csf-icon-preview").addClass("hidden"),c.find("input").val("").trigger("change"),a(this).addClass("hidden")})})},a.fn.csf_field_map=function(){return this.each(function(){var b,c,d,e,f,g,h,i,j,k,l;"undefined"!=typeof L&&(b=a(this),c=b.find(".csf--map-osm"),d=b.find(".csf--map-search input"),e=b.find(".csf--latitude"),f=b.find(".csf--longitude"),g=b.find(".csf--zoom"),h=c.data("map"),i=L.map(c.get(0),h),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(i),j=L.marker(h.center,{draggable:!0}).addTo(i),k=function(a){e.val(a.lat),f.val(a.lng),g.val(i.getZoom())},i.on("click",function(a){j.setLatLng(a.latlng),k(a.latlng)}),i.on("zoom",function(){k(j.getLatLng())}),j.on("drag",function(){k(j.getLatLng())}),d.length||(d=a('[data-depend-id="'+b.find(".csf--address-field").data("address-field")+'"]')),d.autocomplete({source:function(b,c){a.get("https://nominatim.openstreetmap.org/search",{format:"json",q:b.term},function(a){a.length?c(a.map(function(a){return{value:a.display_name,label:a.display_name,lat:a.lat,lon:a.lon}},"json")):c([{value:"no-data",label:"No Results."}])})},select:function(a,b){if("no-data"===b.item.value)return!1;var c=L.latLng(b.item.lat,b.item.lon);i.panTo(c),j.setLatLng(c),k(c)},create:function(){a(this).autocomplete("widget").addClass("csf-map-ui-autocomplate")}}),l=function(){var a=L.latLng(e.val(),f.val());i.panTo(a),j.setLatLng(a)},e.on("change",l),f.on("change",l))})},a.fn.csf_field_media=function(){return this.each(function(){var h,c=a(this),d=c.find(".csf--button"),e=c.find(".csf--remove"),f=d.data("library")&&d.data("library").split(",")||"",g=c.hasClass("csf-assign-field-background")?c.closest(".csf-field-background").find(".csf--auto-attributes"):!1;d.on("click",function(a){if(a.preventDefault(),"undefined"!=typeof b.wp&&b.wp.media&&b.wp.media.gallery){if(h)return h.open(),void 0;h=b.wp.media({library:{type:f}}),h.on("select",function(){var a,b=h.state().get("selection").first().attributes,i=d.data("preview-size")||"thumbnail";f.length&&-1===f.indexOf(b.subtype)&&-1===f.indexOf(b.type)||(c.find(".csf--id").val(b.id),c.find(".csf--width").val(b.width),c.find(".csf--height").val(b.height),c.find(".csf--alt").val(b.alt),c.find(".csf--title").val(b.title),c.find(".csf--description").val(b.description),a="undefined"!=typeof b.sizes&&"undefined"!=typeof b.sizes.thumbnail&&"thumbnail"===i?b.sizes.thumbnail.url:"undefined"!=typeof b.sizes&&"undefined"!=typeof b.sizes.full?b.sizes.full.url:b.icon,g&&g.removeClass("csf--attributes-hidden"),e.removeClass("hidden"),c.find(".csf--preview").removeClass("hidden"),c.find(".csf--src").attr("src",a),c.find(".csf--thumbnail").val(a),c.find(".csf--url").val(b.url).trigger("change"))}),h.open()}}),c.find(".csf--url").bind("input",function(){var b=a(this).val();/.(png|jpg|jpeg|gif)$/g.test(b)?(e.removeClass("hidden"),c.find(".csf--preview").removeClass("hidden"),c.find(".csf--src").attr("src",b),c.find(".csf--thumbnail").val(b).trigger("change")):(c.find(".csf--preview").addClass("hidden"),c.find(".csf--thumbnail").trigger("change"))}),e.on("click",function(a){a.preventDefault(),g&&g.addClass("csf--attributes-hidden"),e.addClass("hidden"),c.find("input").val(""),c.find(".csf--preview").addClass("hidden"),c.find(".csf--url").trigger("change")})})},a.fn.csf_field_repeater=function(){return this.each(function(){var n,o,b=a(this),c=b.children(".csf-fieldset"),d=c.length?c:b,f=d.children(".csf-repeater-wrapper"),g=d.children(".csf-repeater-hidden"),h=d.children(".csf-repeater-max"),i=d.children(".csf-repeater-min"),j=f.data("field-id"),k=f.data("unique-id"),l=parseInt(f.data("max")),m=parseInt(f.data("min"));f.children(".csf-repeater-item").children(".csf-repeater-content").csf_reload_script(),f.sortable({axis:"y",handle:".csf-repeater-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(a,b){e.helper.name_nested_replace(f.children(".csf-repeater-item"),j),f.csf_customizer_refresh(),b.item.csf_reload_script_retry()}}),d.children(".csf-repeater-add").on("click",function(b){var c,d,e;return b.preventDefault(),c=f.children(".csf-repeater-item").length,i.hide(),l&&c+1>l?(h.show(),void 0):(d=k+j+"["+c+"]",e=g.csf_clone(!0),e.removeClass("csf-repeater-hidden"),e.find(':input[name!="_pseudo"]').each(function(){this.name=d+this.name.replace(this.name.startsWith("_nonce")?"_nonce":k,"")}),e.find(".csf-data-wrapper").each(function(){a(this).attr("data-unique-id",d)}),f.append(e),e.children(".csf-repeater-content").csf_reload_script(),f.csf_customizer_refresh(),f.csf_customizer_listen({closest:!0}),void 0)}),n=function(b){var c,d,g,k,m,n,o;return b.preventDefault(),c=f.children(".csf-repeater-item").length,i.hide(),l&&c+1>l?(h.show(),void 0):(d=a(this),g=d.parent().parent().parent(),k=g.children(".csf-repeater-content").csf_clone(),m=g.children(".csf-repeater-helper").csf_clone(!0),n=new RegExp("("+e.helper.preg_quote(j)+")\\[(\\d+)\\]","g"),k.find(".csf-data-wrapper").each(function(){var b=a(this);b.attr("data-unique-id",b.attr("data-unique-id").replace(n,j+"["+(g.index()+1)+"]"))}),o=a('<div class="csf-repeater-item" />'),o.append(k),o.append(m),f.children().eq(g.index()).after(o),o.children(".csf-repeater-content").csf_reload_script(),e.helper.name_nested_replace(f.children(".csf-repeater-item"),j),f.csf_customizer_refresh(),f.csf_customizer_listen({closest:!0}),void 0)},f.children(".csf-repeater-item").children(".csf-repeater-helper").on("click",".csf-repeater-clone",n),d.children(".csf-repeater-hidden").children(".csf-repeater-helper").on("click",".csf-repeater-clone",n),o=function(b){b.preventDefault();var c=f.children(".csf-repeater-item").length;return h.hide(),i.hide(),m&&m>c-1?(i.show(),void 0):(a(this).closest(".csf-repeater-item").remove(),e.helper.name_nested_replace(f.children(".csf-repeater-item"),j),f.csf_customizer_refresh(),void 0)},f.children(".csf-repeater-item").children(".csf-repeater-helper").on("click",".csf-repeater-remove",o),d.children(".csf-repeater-hidden").children(".csf-repeater-helper").on("click",".csf-repeater-remove",o)})},a.fn.csf_field_slider=function(){return this.each(function(){var b=a(this),c=b.find("input"),d=b.find(".csf-slider-ui"),e=c.data(),f=c.val()||0;d.hasClass("ui-slider")&&d.empty(),d.slider({range:"min",value:f,min:e.min,max:e.max,step:e.step,slide:function(a,b){c.val(b.value).trigger("change")}}),c.keyup(function(){d.slider("value",c.val())})})},a.fn.csf_field_sortable=function(){return this.each(function(){var b=a(this).find(".csf--sortable");b.sortable({axis:"y",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(){b.csf_customizer_refresh()}}),b.find(".csf--sortable-content").csf_reload_script()})},a.fn.csf_field_sorter=function(){return this.each(function(){var b=a(this),c=b.find(".csf-enabled"),d=b.find(".csf-disabled"),e=d.length?d:!1;c.sortable({connectWith:e,placeholder:"ui-sortable-placeholder",update:function(a,c){var d=c.item.find("input");c.item.parent().hasClass("csf-enabled")?d.attr("name",d.attr("name").replace("disabled","enabled")):d.attr("name",d.attr("name").replace("enabled","disabled")),b.csf_customizer_refresh()}}),e&&e.sortable({connectWith:c,placeholder:"ui-sortable-placeholder",update:function(){b.csf_customizer_refresh()}})})},a.fn.csf_field_spinner=function(){return this.each(function(){var b=a(this),c=b.find("input"),d=b.find(".ui-spinner-button"),e=c.data("unit");d.length&&d.remove(),c.spinner({max:c.data("max")||100,min:c.data("min")||0,step:c.data("step")||1,create:function(){e.length&&b.find(".ui-spinner-up").after('<span class="ui-button-text-only csf--unit">'+e+"</span>")},spin:function(a,b){c.val(b.value).trigger("change")}})})},a.fn.csf_field_switcher=function(){return this.each(function(){var b=a(this).find(".csf--switcher");b.on("click",function(){var a=0,c=b.find("input");b.hasClass("csf--active")?b.removeClass("csf--active"):(a=1,b.addClass("csf--active")),c.val(a).trigger("change")})})},a.fn.csf_field_tabbed=function(){return this.each(function(){var b=a(this),c=b.find(".csf-tabbed-nav a"),d=b.find(".csf-tabbed-section");d.eq(0).csf_reload_script(),c.on("click",function(b){b.preventDefault();var c=a(this),e=c.index(),f=d.eq(e);c.addClass("csf-tabbed-active").siblings().removeClass("csf-tabbed-active"),f.csf_reload_script(),f.removeClass("hidden").siblings().addClass("hidden")})})},a.fn.csf_field_typography=function(){return this.each(function(){var b=this,c=a(this),d=[],f=csf_typography_json.webfonts,g=csf_typography_json.googlestyles,h=csf_typography_json.defaultstyles;b.sanitize_subset=function(a){return a=a.replace("-ext"," Extended"),a=a.charAt(0).toUpperCase()+a.slice(1)},b.sanitize_style=function(a){return g[a]?g[a]:a},b.load_google_font=function(a,b,c){a&&"object"==typeof WebFont&&(b=b?b.replace("normal",""):"",c=c?c.replace("normal",""):"",(b||c)&&(a=a+":"+b+c),-1===d.indexOf(a)&&WebFont.load({google:{families:[a]}}),d.push(a))},b.append_select_options=function(c,d,e,f,g){c.find("option").not(":first").remove();var h="";a.each(d,function(a,c){var d,i=c;d=g?e&&-1!==e.indexOf(c)?" selected":"":e&&e===c?" selected":"","subset"===f?i=b.sanitize_subset(c):"style"===f&&(i=b.sanitize_style(c)),h+='<option value="'+c+'"'+d+">"+i+"</option>"}),c.append(h).trigger("csf.change").trigger("chosen:updated")},b.init=function(){var m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,d=[],g=c.find(".csf--typography"),i=c.find(".csf--type"),j=c.find(".csf--block-font-style"),k=g.data("unit"),l=g.data("exclude")?g.data("exclude").split(","):[];c.find(".csf--chosen").length&&(m=c.find("select"),m.each(function(){var b=a(this),c=b.parent().find(".chosen-container");c.length&&c.remove(),b.chosen({allow_single_deselect:!0,disable_search_threshold:15,width:"100%"})})),n=c.find(".csf--font-family"),o=n.val(),n.find("option").not(":first-child").remove(),p="",a.each(f,function(b,c){l&&-1!==l.indexOf(b)||(p+='<optgroup label="'+c.label+'">',a.each(c.fonts,function(a,c){c="object"==typeof c?a:c;var d=c===o?" selected":"";p+='<option value="'+c+'" data-type="'+b+'"'+d+">"+c+"</option>"}),p+="</optgroup>")}),n.append(p).trigger("chosen:updated"),q=c.find(".csf--block-font-style"),q.length&&(r=c.find(".csf--font-style-select"),s=r.val()?r.val().replace(/normal/g,""):"",r.on("change csf.change",function(){var e,f,g,b=r.val();!b&&d&&-1===d.indexOf("normal")&&(b=d[0]),e=b&&"italic"!==b&&"normal"===b?"normal":"",f=b&&"italic"!==b&&"normal"!==b?b.replace("italic",""):e,g=b&&"italic"===b.substr(-6)?"italic":"",c.find(".csf--font-weight").val(f),c.find(".csf--font-style").val(g)}),t=c.find(".csf--block-extra-styles"),t.length&&(u=c.find(".csf--extra-styles"),v=u.val())),w=c.find(".csf--block-subset"),w.length&&(x=c.find(".csf--subset"),y=x.val(),z=x.data("multiple")||!1),A=c.find(".csf--block-backup-font-family"),n.on("change csf.change",function(){var c,e,g,k,l,m,o,p,B;w.length&&w.addClass("hidden"),t.length&&t.addClass("hidden"),A.length&&A.addClass("hidden"),c=n.find(":selected"),e=c.val(),g=c.data("type"),g&&e?("google"!==g&&"custom"!==g||!A.length||A.removeClass("hidden"),q.length&&(k=h,"google"===g&&f[g].fonts[e][0]?k=f[g].fonts[e][0]:"custom"===g&&f[g].fonts[e]&&(k=f[g].fonts[e]),d=k,l=-1!==k.indexOf("normal")?"normal":k[0],m=s&&-1!==k.indexOf(s)?s:l,b.append_select_options(r,k,m,"style"),s=!1,q.removeClass("hidden"),"google"===g&&t.length&&k.length>1&&(b.append_select_options(u,k,v,"style",!0),v=!1,t.removeClass("hidden"))),"google"===g&&w.length&&f[g].fonts[e][1]&&(o=f[g].fonts[e][1],p=o.length<2&&"latin"!==o[0]?o[0]:"",B=y&&-1!==o.indexOf(y)?y:p,B=z&&y?y:B,b.append_select_options(x,o,B,"subset",z),y=!1,w.removeClass("hidden"))):(j.find(":input").val(""),w.length&&(x.find("option").not(":first-child").remove(),x.trigger("chosen:updated")),q.length&&(r.find("option").not(":first-child").remove(),r.trigger("chosen:updated"))),i.val(g)}).trigger("csf.change"),B=c.find(".csf--block-preview"),B.length&&(C=c.find(".csf--preview"),c.on("change",e.helper.debounce(function(){var d,e,f,g,h,i,j,l,m,o,p,q,r,s,t;B.removeClass("hidden"),d=n.val(),e=c.find(".csf--font-weight").val(),f=c.find(".csf--font-style").val(),g=c.find(".csf--font-size").val(),h=c.find(".csf--font-variant").val(),i=c.find(".csf--line-height").val(),j=c.find(".csf--text-align").val(),l=c.find(".csf--text-transform").val(),m=c.find(".csf--text-decoration").val(),o=c.find(".csf--color").val(),p=c.find(".csf--word-spacing").val(),q=c.find(".csf--letter-spacing").val(),r=c.find(".csf--custom-style").val(),s=c.find(".csf--type").val(),"google"===s&&b.load_google_font(d,e,f),t={},d&&(t.fontFamily=d),e&&(t.fontWeight=e),f&&(t.fontStyle=f),h&&(t.fontVariant=h),g&&(t.fontSize=g+k),i&&(t.lineHeight=i+k),q&&(t.letterSpacing=q+k),p&&(t.wordSpacing=p+k),j&&(t.textAlign=j),l&&(t.textTransform=l),m&&(t.textDecoration=m),o&&(t.color=o),C.removeAttr("style"),r&&C.attr("style",r),C.css(t)},100)),B.on("click",function(){C.toggleClass("csf--black-background");var a=B.find(".csf--toggle");a.hasClass("fa-toggle-off")?a.removeClass("fa-toggle-off").addClass("fa-toggle-on"):a.removeClass("fa-toggle-on").addClass("fa-toggle-off")}),B.hasClass("hidden")||c.trigger("change"))},b.init()})},a.fn.csf_field_upload=function(){return this.each(function(){var h,c=a(this),d=c.find("input"),e=c.find(".csf--button"),f=c.find(".csf--remove"),g=e.data("library")&&e.data("library").split(",")||"";d.on("change",function(){d.val()?f.removeClass("hidden"):f.addClass("hidden")}),e.on("click",function(a){if(a.preventDefault(),"undefined"!=typeof b.wp&&b.wp.media&&b.wp.media.gallery){if(h)return h.open(),void 0;h=b.wp.media({library:{type:g}}),h.on("select",function(){var a=h.state().get("selection").first().attributes;g.length&&-1===g.indexOf(a.subtype)&&-1===g.indexOf(a.type)||(c.find(".csf--preview").removeClass("hidden"),c.find(".csf--src").attr("src",a.url),d.val(a.url).trigger("change"))}),h.open()}}),d.bind("input",function(){var b=a(this).val();/.(png|jpg|jpeg|gif)$/g.test(b)?(c.find(".csf--preview").removeClass("hidden"),c.find(".csf--src").attr("src",b)):c.find(".csf--preview").addClass("hidden")}),f.on("click",function(a){a.preventDefault(),d.val("").trigger("change"),c.find(".csf--preview").addClass("hidden")})})},a.fn.csf_field_wp_editor=function(){return this.each(function(){var c,d,f,g,h,i,j,k,l,m,n,o;"undefined"!=typeof b.wp.editor&&"undefined"!=typeof b.tinyMCEPreInit&&"undefined"!=typeof b.tinyMCEPreInit.mceInit.csf_wp_editor&&(c=a(this),d=c.find(".csf-wp-editor"),f=c.find("textarea"),g=c.find(".wp-editor-wrap").length||c.find(".mce-container").length,g&&(d.empty(),d.append(f),f.css("display","")),h=e.helper.uid("csf-editor-"),f.attr("id",h),i={tinymce:b.tinyMCEPreInit.mceInit.csf_wp_editor,quicktags:b.tinyMCEPreInit.qtInit.csf_wp_editor},j=d.data("editor-settings"),k=function(a){a.on("change",e.helper.debounce(function(){a.save(),f.trigger("change")},250))},l=wp.oldEditor?wp.oldEditor:wp.editor,l&&l.hasOwnProperty("autop")&&(wp.editor.autop=l.autop,wp.editor.removep=l.removep,wp.editor.initialize=l.initialize),i.tinymce=a.extend({},i.tinymce,{selector:"#"+h,setup:k}),j.tinymce===!1&&(i.tinymce=!1,d.addClass("csf-no-tinymce")),j.quicktags===!1&&(i.quicktags=!1,d.addClass("csf-no-quicktags")),m=setInterval(function(){c.is(":visible")&&(b.wp.editor.initialize(h,i),clearInterval(m))}),j.media_buttons&&b.csf_media_buttons&&(n=d.find(".wp-media-buttons"),n.length?n.find(".csf-shortcode-button").data("editor-id",h):(o=a(b.csf_media_buttons),o.find(".csf-shortcode-button").data("editor-id",h),d.prepend(o))))})},a.fn.csf_confirm=function(){return this.each(function(){a(this).on("click",function(c){var d=a(this).data("confirm")||b.csf_vars.i18n.confirm,f=confirm(d);return e.vars.is_confirm=!0,f?void 0:(c.preventDefault(),e.vars.is_confirm=!1,!1)})})},a.fn.serializeObject=function(){var b={};return a.each(this.serializeArray(),function(c,e){var f=e.name,g=e.value;b[f]=b[f]===d?g:a.isArray(b[f])?b[f].concat(g):[b[f],g]}),b},a.fn.csf_save=function(){return this.each(function(){var h,c=a(this),d=a(".csf-save"),f=a(".csf-options"),g=!1;c.on("click",function(i){if(!g){var j=c.data("save"),k=c.val();d.attr("value",j),c.hasClass("csf-save-ajax")&&(i.preventDefault(),f.addClass("csf-saving"),d.prop("disabled",!0),b.wp.ajax.post("csf_"+f.data("unique")+"_ajax_save",{data:a("#csf-form").serializeJSONCSF()}).done(function(b){var c,i;a(".csf-error").remove(),Object.keys(b.errors).length&&(c='<i class="csf-label-error csf-error">!</i>',a.each(b.errors,function(b,d){var e=a('[data-depend-id="'+b+'"]'),f=a("#csf-tab-link-"+(e.closest(".csf-section").index()+1)),g=f.closest(".csf-tab-depth-0");e.closest(".csf-fieldset").append('<p class="csf-text-error csf-error">'+d+"</p>"),f.find(".csf-error").length||f.append(c),g.find(".csf-arrow .csf-error").length||g.find(".csf-arrow").append(c),console.log(d)
})),f.removeClass("csf-saving"),d.prop("disabled",!1).attr("value",k),g=!1,e.vars.form_modified=!1,e.vars.$form_warning.hide(),clearTimeout(h),i=a(".csf-form-success"),i.empty().append(b.notice).fadeIn("fast",function(){h=setTimeout(function(){i.fadeOut("fast")},1e3)})}).fail(function(a){alert(a.error)}))}g=!0})})},a.fn.csf_options=function(){return this.each(function(){var f=a(this),g=f.find(".csf-content"),h=f.find(".csf-form-success"),i=f.find(".csf-form-warning"),j=f.find(".csf-header .csf-save");e.vars.$form_warning=i,i.length&&(b.onbeforeunload=function(){return e.vars.form_modified?!0:d},g.on("change keypress",":input",function(){e.vars.form_modified||(h.hide(),i.fadeIn("fast"),e.vars.form_modified=!0)})),h.hasClass("csf-form-show")&&setTimeout(function(){h.fadeOut("fast")},1e3),a(c).keydown(function(a){return(a.ctrlKey||a.metaKey)&&83===a.which?(j.trigger("click"),a.preventDefault(),!1):void 0})})},a.fn.csf_taxonomy=function(){return this.each(function(){var d,e,b=a(this),c=b.parents("form");"addtag"===c.attr("id")&&(d=c.find("#submit"),e=b.find(".csf-field").csf_clone(),d.on("click",function(){c.find(".form-required").hasClass("form-invalid")||(b.data("inited",!1),b.empty(),b.html(e),e=e.csf_clone(),b.csf_reload_script())}))})},a.fn.csf_shortcode=function(){var f=this;return f.shortcode_parse=function(b,c){var d="";return a.each(b,function(b,e){c=c?c:b,d+="["+c,a.each(e,function(a,b){"content"===a?(d+="]",d+=b,d+="[/"+c):d+=f.shortcode_tags(a,b)}),d+="]"}),d},f.shortcode_tags=function(b,c){var d="";return""!==c&&("object"!=typeof c||a.isArray(c)?d+=" "+b.replace("-","_")+'="'+c.toString()+'"':a.each(c,function(a,b){switch(a){case"background-image":b=b.url?b.url:""}""!==b&&(d+=" "+a.replace("-","_")+'="'+b.toString()+'"')})),d},f.insertAtChars=function(a,b){var c="undefined"!=typeof a[0].name?a[0]:a;return c.value.length&&"undefined"!=typeof c.selectionStart?(c.focus(),c.value.substring(0,c.selectionStart)+b+c.value.substring(c.selectionEnd,c.value.length)):(c.focus(),b)},f.send_to_editor=function(b,c){var d,e;"undefined"!=typeof tinymce&&(d=tinymce.get(c)),d&&!d.isHidden()?d.execCommand("mceInsertContent",!1,b):(e=a("#"+c),e.val(f.insertAtChars(e,b)).trigger("change"))},this.each(function(){var o,p,q,r,s,t,u,v,w,g=a(this),h=g.find(".csf-modal-load"),j=(g.find(".csf-modal-content"),g.find(".csf-modal-insert")),k=g.find(".csf-modal-loading"),l=g.find("select"),m=g.data("modal-id"),n=g.data("nonce");a(c).on("click",'.csf-shortcode-button[data-modal-id="'+m+'"]',function(b){b.preventDefault(),w=a(this),o=w.data("editor-id")||!1,p=w.data("target-id")||!1,q=w.data("gutenberg-id")||!1,g.show(),g.hasClass("csf-shortcode-single")&&s===d&&l.trigger("change")}),l.on("change",function(){var c=a(this),d=c.find(":selected");r=c.val(),s=d.data("shortcode"),t=d.data("view")||"normal",u=d.data("group")||s,h.empty(),r?(k.show(),b.wp.ajax.post("csf-get-shortcode-"+m,{shortcode_key:r,nonce:n}).done(function(b){k.hide();var c=a(b.content).appendTo(h);j.parent().removeClass("hidden"),v=c.find(".csf--repeat-shortcode").csf_clone(),c.csf_reload_script(),c.find(".csf-fields").csf_reload_script()})):j.parent().addClass("hidden")}),j.on("click",function(c){var d,e,h,i,k;if(c.preventDefault(),!j.prop("disabled")&&!j.attr("disabled")){switch(d="",e=g.find(".csf-field:not(.hidden)").find(":input:not(.ignore)").serializeObjectCSF(),t){case"contents":h=s?e[s]:e,a.each(h,function(a,b){var c=s?s:a;d+="["+c+"]"+b+"[/"+c+"]"});break;case"group":d+="["+s,a.each(e[s],function(a,b){d+=f.shortcode_tags(a,b)}),d+="]",d+=f.shortcode_parse(e[u],u),d+="[/"+s+"]";break;case"repeater":d+=f.shortcode_parse(e[u],u);break;default:d+=f.shortcode_parse(e)}d=""===d?"["+s+"]":d,q?(i=b.csf_gutenberg_props.attributes.hasOwnProperty("shortcode")?b.csf_gutenberg_props.attributes.shortcode:"",b.csf_gutenberg_props.setAttributes({shortcode:i+d})):o?f.send_to_editor(d,o):(k=p?a(p):w.parent().find("textarea"),k.val(f.insertAtChars(k,d)).trigger("change")),g.hide()}}),g.on("click",".csf--repeat-button",function(a){var b,c,d;a.preventDefault(),b=g.find(".csf--repeatable"),c=v.csf_clone(),d=c.find(".csf-repeat-remove"),c.appendTo(b),c.find(".csf-fields").csf_reload_script(),e.helper.name_nested_replace(g.find(".csf--repeat-shortcode"),u),d.on("click",function(){c.remove(),e.helper.name_nested_replace(g.find(".csf--repeat-shortcode"),u)})}),g.on("click",".csf-modal-close, .csf-modal-overlay",function(){g.hide()})})},"function"==typeof Color&&(Color.fn.toString=function(){var a,b;if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");if(a=parseInt(this._color,10).toString(16),this.error)return"";if(a.length<6)for(b=6-a.length-1;b>=0;b--)a="0"+a;return"#"+a}),e.funcs.parse_color=function(a){var b=a.replace(/\s+/g,""),c=-1!==b.indexOf("rgba")?parseFloat(100*b.replace(/^.*,(.+)\)/,"$1")):100,d=100>c?!0:!1;return{value:b,transparent:c,rgba:d}},a.fn.csf_color=function(){return this.each(function(){var g,c=a(this),d=e.funcs.parse_color(c.val()),f=b.csf_vars.color_palette.length?b.csf_vars.color_palette:!0;c.hasClass("wp-color-picker")&&c.closest(".wp-picker-container").after(c).remove(),c.wpColorPicker({palettes:f,change:function(a,b){var d=b.color.toString();g.removeClass("csf--transparent-active"),g.find(".csf--transparent-offset").css("background-color",d),c.val(d).trigger("change")},create:function(){g=c.closest(".wp-picker-container");var b=c.data("a8cIris"),f=a('<div class="csf--transparent-wrap"><div class="csf--transparent-slider"></div><div class="csf--transparent-offset"></div><div class="csf--transparent-text"></div><div class="csf--transparent-button">transparent <i class="fa fa-toggle-off"></i></div></div>').appendTo(g.find(".wp-picker-holder")),h=f.find(".csf--transparent-slider"),i=f.find(".csf--transparent-text"),j=f.find(".csf--transparent-offset"),k=f.find(".csf--transparent-button");"transparent"===c.val()&&g.addClass("csf--transparent-active"),k.on("click",function(){"transparent"!==c.val()?(c.val("transparent").trigger("change").removeClass("iris-error"),g.addClass("csf--transparent-active")):(c.val(b._color.toString()).trigger("change"),g.removeClass("csf--transparent-active"))}),h.slider({value:d.transparent,step:1,min:0,max:100,slide:function(a,d){var e=parseFloat(d.value/100);b._color._alpha=e,c.wpColorPicker("color",b._color.toString()),i.text(1===e||0===e?"":e)},create:function(){var a=parseFloat(d.transparent/100),f=1>a?a:"";i.text(f),j.css("background-color",d.value),g.on("click",".wp-picker-clear",function(){b._color._alpha=1,i.text(""),h.slider("option","value",100),g.removeClass("csf--transparent-active"),c.trigger("change")}),g.on("click",".wp-picker-default",function(){var a=e.funcs.parse_color(c.data("default-color")),d=parseFloat(a.transparent/100),f=1>d?d:"";b._color._alpha=d,i.text(f),h.slider("option","value",a.transparent)})}})}})})},a.fn.csf_chosen=function(){return this.each(function(){var k,l,m,n,o,c=a(this),e=c.parent().find(".chosen-container"),f=c.hasClass("csf-chosen-sortable")||!1,g=c.hasClass("csf-chosen-ajax")||!1,h=c.attr("multiple")||!1,i=h?"100%":"auto",j=a.extend({allow_single_deselect:!0,disable_search_threshold:10,width:i,no_results_text:b.csf_vars.i18n.no_results_text},c.data("chosen-settings"));e.length&&e.remove(),g?(k=a.extend({data:{type:"post",nonce:""},allow_single_deselect:!0,disable_search_threshold:-1,width:"100%",min_length:3,type_delay:500,typing_text:b.csf_vars.i18n.typing_text,searching_text:b.csf_vars.i18n.searching_text,no_results_text:b.csf_vars.i18n.no_results_text},c.data("chosen-settings")),c.CSFAjaxChosen(k)):c.chosen(j),h&&(l=c.parent().find(".csf-hidden-select"),m=l.val()||[],c.on("change",function(a,c){c&&c.selected?l.append('<option value="'+c.selected+'" selected="selected">'+c.selected+"</option>"):c&&c.deselected&&l.find('option[value="'+c.deselected+'"]').remove(),0===l.children().length&&b.wp.customize!==d&&b.wp.customize.control(l.data("customize-setting-link")).setting.set(""),l.trigger("change")}),c.CSFChosenOrder(m,!0)),f&&(n=c.parent().find(".chosen-container"),o=n.find(".chosen-choices"),o.bind("mousedown",function(b){a(b.target).is("span")&&b.stopPropagation()}),o.sortable({items:"li:not(.search-field)",helper:"orginal",cursor:"move",placeholder:"search-choice-placeholder",start:function(a,b){b.placeholder.width(b.item.innerWidth()),b.placeholder.height(b.item.innerHeight())},update:function(){var e="",f=c.data("chosen"),g=c.parent().find(".csf-hidden-select");o.find(".search-choice-close").each(function(){var b=a(this).data("option-array-index");a.each(f.results_data,function(a,c){c.array_index===b&&(e+='<option value="'+c.value+'" selected>'+c.value+"</option>")})}),g.children().remove(),g.append(e),g.trigger("change")}}))})},a.fn.csf_checkbox=function(){return this.each(function(){var b=a(this),c=b.find(".csf--input"),d=b.find(".csf--checkbox");d.on("click",function(){c.val(Number(d.prop("checked"))).trigger("change")})})},a.fn.csf_siblings=function(){return this.each(function(){var b=a(this),c=b.find(".csf--sibling"),d=b.data("multiple")||!1;c.on("click",function(){var c=a(this);d?c.hasClass("csf--active")?(c.removeClass("csf--active"),c.find("input").prop("checked",!1).trigger("change")):(c.addClass("csf--active"),c.find("input").prop("checked",!0).trigger("change")):(b.find("input").prop("checked",!1),c.find("input").prop("checked",!0).trigger("change"),c.addClass("csf--active").siblings().removeClass("csf--active"))})})},a.fn.csf_help=function(){return this.each(function(){var c,f,b=a(this);b.on({mouseenter:function(){c=a('<div class="csf-tooltip"></div>').html(b.find(".csf-help-text").html()).appendTo("body"),f=e.vars.is_rtl?b.offset().left+24:b.offset().left-c.outerWidth(),c.css({top:b.offset().top-(c.outerHeight()/2-14),left:f})},mouseleave:function(){c!==d&&c.remove()}})})},a.fn.csf_customizer_refresh=function(){return this.each(function(){var f,g,h,i,j,k,d=a(this),e=d.closest(".csf-customize-complex");e.length?(f=e.find(":input"),g=e.data("unique-id"),h=e.data("option-id"),i=f.serializeObjectCSF(),j=a.isEmptyObject(i)?"":i[g][h],k=b.wp.customize.control(g+"["+h+"]"),k.setting._value=null,k.setting.set(j)):d.find(":input").first().trigger("change"),a(c).trigger("csf-customizer-refresh",d)})},a.fn.csf_customizer_listen=function(c){var f=a.extend({closest:!1},c);return this.each(function(){if(b.wp.customize!==d){var c=f.closest?a(this).closest(".csf-customize-complex"):a(this),g=c.find(":input"),h=c.data("unique-id"),i=c.data("option-id");h!==d&&g.on("change keyup",e.helper.debounce(function(){var d=c.find(":input").serializeObjectCSF(),e=!a.isEmptyObject(d)&&d[h]&&d[h][i]?d[h][i]:"";b.wp.customize.control(h+"["+i+"]").setting.set(e)},250))}})},a(c).on("expanded",".control-section",function(){var c,d,b=a(this);b.hasClass("open")&&!b.data("inited")&&(c=b.find(".csf-customize-field"),d=b.find(".csf-customize-complex"),c.length&&(b.csf_dependency(),c.csf_reload_script({dependency:!1}),d.csf_customizer_listen()),b.data("inited",!0))}),e.vars.$window.on("resize csf.resize",e.helper.debounce(function(){var d=navigator.userAgent.indexOf("AppleWebKit/")>-1?e.vars.$window.width():b.innerWidth;782>=d&&!e.vars.onloaded&&(a(".csf-section").csf_reload_script(),e.vars.onloaded=!0)},200)).trigger("csf.resize"),a.fn.csf_widgets=function(){this.length&&(a(c).on("widget-added widget-updated",function(a,b){b.find(".csf-fields").csf_reload_script()}),a(".widgets-sortables, .control-section-sidebar").on("sortstop",function(a,b){b.item.find(".csf-fields").csf_reload_script_retry()}),a(c).on("click",".widget-top",function(){a(this).parent().find(".csf-fields").csf_reload_script()}))},a.fn.csf_reload_script_retry=function(){return this.each(function(){var b=a(this);b.data("inited")&&b.children(".csf-field-wp_editor").csf_field_wp_editor()})},a.fn.csf_reload_script=function(b){var d=a.extend({dependency:!0},b);return this.each(function(){var b=a(this);b.data("inited")||(b.children(".csf-field-accordion").csf_field_accordion(),b.children(".csf-field-backup").csf_field_backup(),b.children(".csf-field-background").csf_field_background(),b.children(".csf-field-code_editor").csf_field_code_editor(),b.children(".csf-field-date").csf_field_date(),b.children(".csf-field-fieldset").csf_field_fieldset(),b.children(".csf-field-gallery").csf_field_gallery(),b.children(".csf-field-group").csf_field_group(),b.children(".csf-field-icon").csf_field_icon(),b.children(".csf-field-media").csf_field_media(),b.children(".csf-field-map").csf_field_map(),b.children(".csf-field-repeater").csf_field_repeater(),b.children(".csf-field-slider").csf_field_slider(),b.children(".csf-field-sortable").csf_field_sortable(),b.children(".csf-field-sorter").csf_field_sorter(),b.children(".csf-field-spinner").csf_field_spinner(),b.children(".csf-field-switcher").csf_field_switcher(),b.children(".csf-field-tabbed").csf_field_tabbed(),b.children(".csf-field-typography").csf_field_typography(),b.children(".csf-field-upload").csf_field_upload(),b.children(".csf-field-wp_editor").csf_field_wp_editor(),b.children(".csf-field-border").find(".csf-color").csf_color(),b.children(".csf-field-background").find(".csf-color").csf_color(),b.children(".csf-field-color").find(".csf-color").csf_color(),b.children(".csf-field-color_group").find(".csf-color").csf_color(),b.children(".csf-field-link_color").find(".csf-color").csf_color(),b.children(".csf-field-typography").find(".csf-color").csf_color(),b.children(".csf-field-select").find(".csf-chosen").csf_chosen(),b.children(".csf-field-checkbox").find(".csf-checkbox").csf_checkbox(),b.children(".csf-field-button_set").find(".csf-siblings").csf_siblings(),b.children(".csf-field-image_select").find(".csf-siblings").csf_siblings(),b.children(".csf-field-palette").find(".csf-siblings").csf_siblings(),b.children(".csf-field").find(".csf-help").csf_help(),d.dependency&&b.csf_dependency(),b.data("inited",!0),a(c).trigger("csf-reload-script",b))})},a(c).ready(function(){a(".csf-save").csf_save(),a(".csf-options").csf_options(),a(".csf-sticky-header").csf_sticky(),a(".csf-nav-options").csf_nav_options(),a(".csf-nav-metabox").csf_nav_metabox(),a(".csf-taxonomy").csf_taxonomy(),a(".csf-page-templates").csf_page_templates(),a(".csf-post-formats").csf_post_formats(),a(".csf-shortcode").csf_shortcode(),a(".csf-search").csf_search(),a(".csf-confirm").csf_confirm(),a(".csf-expand-all").csf_expand_all(),a(".csf-onload").csf_reload_script(),a(".widget").csf_widgets()})}(jQuery,window,document);